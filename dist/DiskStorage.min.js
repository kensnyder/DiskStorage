!function(a){"use strict";function b(a,b){this.isDirty=!1,this.name=a||"default",this.engine=b||"localStorage";var d=c[this.engine].getItem("DSto"+this.name);this.data=d?c.JSON.parse(d):{};var e=this;this._flush=function(){e.flush()}}var c=a;b.prototype={flush:function(){return this.isDirty&&(c[this.engine].setItem("DSto"+this.name,c.JSON.stringify(this.data)),this.isDirty=!1),this},set:function(a,b){return this.data[a]=b,this.isDirty||setTimeout(this._flush,0),this.isDirty=!0,this},get:function(a){return this.data[a]},remove:function(a){return delete this.data[a],this.isDirty||setTimeout(this._flush,0),this.isDirty=!0,this},clear:function(){return this.data={},this.isDirty||setTimeout(this._flush,0),this.isDirty=!0,this},size:function(){var a=0;for(var b in this.data)this.data.hasOwnProperty(b)&&a++;return a},forEach:function(a,b){for(var c in this.data)this.data.hasOwnProperty(c)&&a.call(b||this,this.data[c],c,this);return this},exportData:function(){return Object.clone?Object.clone(this.data):c.JSON.parse(c.JSON.stringify(this.data))},load:function(a){return this.data=a,this.isDirty||setTimeout(this._flush,0),this.isDirty=!0,this},clone:function(a,c){if(a=a||"default",a==this.name&&c==this.engine)throw new Error("DiskStorage: cannot clone to same namespace");var d=new b(a,c||this.engine);return d.load(this.exportData()),d},destroy:function(){return c[this.engine].removeItem("DSto"+this.name),this.data={},this}},b.isSupported=function(){return c.localStorage&&c.sessionStorage&&c.JSON},a.DiskStorage=b,b.isSupported()||(c=a.DiskStorageShims)}(window);