!function(a){"use strict";function b(b){this.isDirty=!1,this.name=b||"default";var c=a.localStorage.getItem("DiskStorage-"+this.name);this.data=c?JSON.parse(c):{},this.flush=this.flush.bind(this)}b.prototype.flush=function(){return this.isDirty&&(a.localStorage.setItem("DiskStorage-"+this.name,JSON.stringify(this.data)),this.isDirty=!1),this},b.prototype.set=function(a,b){return this.data[a]=b,this.isDirty||setTimeout(this.flush,0),this.isDirty=!0,this},b.prototype.get=function(a){return this.data[a]},b.prototype.remove=function(a){return delete this.data[a],this.isDirty||setTimeout(this.flush,0),this.isDirty=!0,this},b.prototype.clear=function(){return this.data={},this.isDirty||setTimeout(this.flush,0),this.isDirty=!0,this},b.prototype.size=function(){return Object.keys(this.data).length},b.prototype.forEach=function(a,b){a=a.bind(b||this);for(var c in this.data)this.data.hasOwnProperty(c)&&a(this.data[c],c,this);return this},b.prototype.export=function(){return Object.clone?Object.clone(this.data):JSON.parse(JSON.stringify(this.data))},b.prototype.load=function(a){return this.data=a,this.isDirty||setTimeout(this.flush,0),this.isDirty=!0,this},b.prototype.clone=function(a){if(a=a||"default",a==this.name)throw new Error("DiskStorage: cannot clone to same namespace");var c=new b(a);return c.load(this.export()),c},b.isSupported=function(){return"localStorage"in a&&!!a.localStorage&&a.JSON&&a.JSON.parse&&a.JSON.stringify&&Function.prototype.bind&&Object.keys},a.DiskStorage=b}(window);