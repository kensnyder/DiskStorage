!function(a){"use strict";function b(b,c){this.isDirty=!1,this.name=b||"default",this.engine=c||"localStorage";var d=a[this.engine].getItem("DiskStorage-"+this.name);this.data=d?JSON.parse(d):{},this.flush=this.flush.bind(this)}b.prototype={flush:function(){return this.isDirty&&(a[this.engine].setItem("DiskStorage-"+this.name,JSON.stringify(this.data)),this.isDirty=!1),this},set:function(a,b){return this.data[a]=b,this.isDirty||setTimeout(this.flush,0),this.isDirty=!0,this},get:function(a){return this.data[a]},remove:function(a){return delete this.data[a],this.isDirty||setTimeout(this.flush,0),this.isDirty=!0,this},clear:function(){return this.data={},this.isDirty||setTimeout(this.flush,0),this.isDirty=!0,this},size:function(){return Object.keys(this.data).length},forEach:function(a,b){a=a.bind(b||this);for(var c in this.data)this.data.hasOwnProperty(c)&&a(this.data[c],c,this);return this},"export":function(){return Object.clone?Object.clone(this.data):JSON.parse(JSON.stringify(this.data))},load:function(a){return this.data=a,this.isDirty||setTimeout(this.flush,0),this.isDirty=!0,this},clone:function(a,c){if(a=a||"default",a==this.name&&c==this.engine)throw new Error("DiskStorage: cannot clone to same namespace");var d=new b(a,c||this.engine);return d.load(this.export()),d},destroy:function(){return a[this.engine].removeItem("DiskStorage-"+this.name),this.data={},this}},b.isSupported=function(){return"localStorage"in a&&!!a.localStorage&&"sessionStorage"in a&&!!a.sessionStorage&&a.JSON&&JSON.parse&&JSON.stringify&&Function.prototype.bind&&Object.keys},a.DiskStorage=b}(window);