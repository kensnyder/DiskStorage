!function(a){"use strict";function b(a,b){this.isDirty=!1,this.name=a||"default",this.engine=b||"localStorage";var d=c[this.engine].getItem("DiskStorage-"+this.name);this.data=d?c.JSON.parse(d):{},this.flush=this.flush.bind(this)}var c=a;b.prototype={flush:function(){return this.isDirty&&(c[this.engine].setItem("DiskStorage-"+this.name,c.JSON.stringify(this.data)),this.isDirty=!1),this},set:function(a,b){return this.data[a]=b,this.isDirty||setTimeout(this.flush,0),this.isDirty=!0,this},get:function(a){return this.data[a]},remove:function(a){return delete this.data[a],this.isDirty||setTimeout(this.flush,0),this.isDirty=!0,this},clear:function(){return this.data={},this.isDirty||setTimeout(this.flush,0),this.isDirty=!0,this},size:function(){return Object.keys(this.data).length},forEach:function(a,b){a=a.bind(b||this);for(var c in this.data)this.data.hasOwnProperty(c)&&a(this.data[c],c,this);return this},"export":function(){return Object.clone?Object.clone(this.data):c.JSON.parse(c.JSON.stringify(this.data))},load:function(a){return this.data=a,this.isDirty||setTimeout(this.flush,0),this.isDirty=!0,this},clone:function(a,c){if(a=a||"default",a==this.name&&c==this.engine)throw new Error("DiskStorage: cannot clone to same namespace");var d=new b(a,c||this.engine);return d.load(this.export()),d},destroy:function(){return c[this.engine].removeItem("DiskStorage-"+this.name),this.data={},this}},b.isSupported=function(){return c.localStorage&&c.sessionStorage&&c.JSON&&c.JSON.parse&&c.JSON.stringify&&Function.prototype.bind&&c.Object.keys},a.DiskStorage=b,b.isSupported()||(c=a.DiskStorageShims)}(window);