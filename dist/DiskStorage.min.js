/*! DiskStorage - v3.0.0 - Apr 2015, https://github.com/kensnyder/DiskStorage - Copyright (c) 2015 Ken Snyder; Licensed MIT */
!function(a){"use strict";function b(b){function c(a){return function(){clearTimeout(d.flushTimeoutHandle),d.flushTimeoutHandle=setTimeout(a,d.flushDebounceMs)}}var d=this;d.isDirty=!1,"string"==typeof b&&(b={name:b},"string"==typeof arguments[1]&&(b.engine=arguments[1])),b=b||{},d.name=b.name||"default",d.prefix=b.prefix||"DSto",d.engine=b.engine||"localStorage",d.flushDebounceMs=b.flushDebounceMs||15;var e=a[this.engine].getItem(b.importKey||this.prefix+this.name);this.data=e?a.JSON.parse(e):{},b.importKey&&this.data&&a[this.engine].removeItem(b.importKey),this._flush=c(function(){d.flush()}),window.addEventListener("beforeunload",function(){clearTimeout(d.flushTimeoutHandle),d.isDirty&&d.flush()})}b.version="%VERSION%",b.prototype={set:function(a,b){return this.data[a]=b,this.isDirty=!0,this._flush(),this},get:function(a){return this.data[a]},remove:function(a){return delete this.data[a],this.isDirty=!0,this._flush(),this},clear:function(){return this.data={},this.isDirty=!0,this._flush(),this},flush:function(){return clearTimeout(this.flushTimeoutHandle),a[this.engine].setItem(this.prefix+this.name,a.JSON.stringify(this.data)),this.isDirty=!1,this},"export":function(){return a.JSON.parse(a.JSON.stringify(this.data))},load:function(a){return this.data=a,this.isDirty=!0,this._flush(),this},clone:function(a){a=a||{};var c=new b({prefix:a.prefix||this.prefix,name:a.name||this.name,engine:a.engine||this.engine});return c.load(this.export()),c},destroy:function(){return a[this.engine].removeItem(this.prefix+this.name),this.data={},this}},b.isSupported=function(){return a.localStorage&&a.sessionStorage&&a.JSON},window.DiskStorage=b}(window);